# The current content is populated by the puppet and ssl is enabled. You can replace the content of this file with:
[{rabbit, [{loopback_users, []}]}].

Steps to disable rabbitmq ssl:
service rabbitmq-server stop
Edit etc/rabbitmq/rabbitmq.config
service rabbitmq-server start

# Disable the ESA node firewall, to access the RabbitMQ IP access:
service iptables stop; service ip6tables stop; chkconfig iptables off; chkconfig ip6tables off

http://10.101.216.150:15672/


# Yum operations:
on ESA node:
yum <install|remove|update> --disablerepo=base --disablerepo=updates --disablerepo=extras <rpm_name>
on SA node:
yum <install|remove|update> --disablerepo=RSASoftware --disablerepo=sa --disablerepo=base --disablerepo=updates --disablerepo=extras <rpm_name>
--disablerepo=base --disablerepo=updates --disablerepo=extras --disablerepo=epel --disablerepo=erlang

Puppet commands:
agent: puppet status find local
service puppetmaster restart

# Building ESA rpms:
- with license disabled
mvn -Prpm -DskipTests -Dmvn.com.netwitness.esa.BUILD_TYPE=developer –Dmvn.com.netwitness.esa.license.enabled=false package
- with license enabled
mvn -Prpm -DskipTests package


# Code-coverage:
clover_files_dir = /Users/bakhra/tmp/clover/
- instrument the server/class client jars
mvn clean clover2:setup package -DskipTests
- set CLASSPATH_PREFIX with clover*.jar file full path
- launch all the tests
- Run for generating aggregated Code-coverage report:
mvn clover2:aggregate clover2
- cloverreport will be in <repo>/[server|client]/target/site/clover

# Running multiple nosetests simultaneously:
nosetests -sv --processes=3 --process-timeout=600 -e '^Setup' -m 'test' test/correlation_test.py

https://libhq-ro.rsa.lab.emc.com/envision/sa/sa-logparsers/builds/release/netwitness/

# Running integration tests on mac
mvn -U clean package -Dcom.rsa.netwitness.esa.TEST_SERVER=10.101.216.127 -DskipITs=false

# Sending same command to all terminals of a screen
C-a : (colon) Enter command line mode.
This way you can type a command once, but you will still have to enter each separate window.
But there is a better way. As an example we'll send “ls -l” to all the windows.
at "#" stuff "zsh^M"

# start a tunnel from some machine's port 80 to your local post 2001
ssh -N -L2001:localhost:80 somemachine

# Creating Yum repo for faster upgrade:
- make sure baseurl of /etc/yum.repods.d/sa.repo points to:
#baseurl = http://10.101.217.117/smcupdate/10.5.0-Alpha (for faster download)
#baseurl = http://devrepo.netwitness.local/RSA/10.5/10.5.0/10.5.0-RC/
- python -tt /usr/bin/reposync --norepopath -r sa -p /var/netwitness/srv/www/rsa/updates/RemoteRPMs
- createrepo /var/netwitness/srv/www/rsa/updates/
- baseurl=http://10.101.217.56/rsa/updates/
- make sure all repos are disabled; yum clean all
- now do yum update on SA machine.


# Upgrade steps:
- Installed 10.3.5 systems (1SA, 1ESA, 1LD, 1Conc)
- Enabled http://devrepo.netwitness.local/RSA/10.3/10.3-SMCUpdate/ repo and yum update to latest rpms for 10.3.5 SA installation
- Enabled http://devrepo.netwitness.local/RSA/10.5/10.5.0/10.5.0-RC/ repo on SA machine and did 'yum update' and got the following error:

(41/46): security-analytics-web-server-10.5.0.0.17933-5.noarch.rpm                                                                                                                   | 114 MB     00:47
(42/46): tokumx-enterprise-1.4.2-2.el6.x86_64.rpm                                                                                                                                    |  45 MB     00:15
(43/46): tokumx-enterprise-common-1.4.2-2.el6.x86_64.rpm                                                                                                                             | 518 kB     00:00
(44/46): tokumx-enterprise-server-1.4.2-2.el6.x86_64.rpm                                                                                                                             | 7.8 MB     00:01
(45/46): unzip-6.0-2.el6_6.x86_64.rpm                                                                                                                                                | 149 kB     00:00
(46/46): virt-what-1.11-1.2.el6.x86_64.rpm                                                                                                                                           |  24 kB     00:00
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                                                       1.9 MB/s | 947 MB     08:13
warning: rpmts_HdrFromFdno: Header V4 RSA/SHA1 Signature, key ID 02744c85: NOKEY


Public key for nwconsole-10.5.0.0.5269-4.el6.x86_64.rpm is not installed

esa-client --profiles carlos
jmx-connect --port 55556 --rmi_port 55555
jmx-connect --port 50036 --rmi_port 50035d
carlos-connect --port 55556
carlos-connect --port 50036
OR
jmx-connect --url service:jmx:rmi://localhost:55556/jndi/rmi://localhost:55555/carlos --domain com.rsa.netwitness.esa
carlos-connect --url jms://localhost:55556?carlos.useSSL=true
/home/bakhra/source/esa/unify/backend/esa/basic/testdata/esa_server_launch_test.py/CustomPortsESAServerLaunchTest/test_all_ports_non_default_java_opts/knowngood/test_all_ports_non_default_java_opts_mongo.json
/home/bakhra/source/esa/unify/backend/esa/basic/testdata/esa_server_launch_test.py/CustomPortsESAServerLaunchTest/test_all_ports_non_default_java_opts/knowngood/test_all_ports_non_default_java_opts_mongo.json

lsblk --ascii --output NAME,KNAME,MODEL,RM,RO,SCHED,TYPE,SIZE,STATE,MOUNTPOINT
lsof -i


forever while:
==============
while true; do nosetests message_bus_test.py -m 'test_event_format_default' ; if [ $? != 0 ]; then break; fi;  done

python -m http.server

JMC ESA url
===========
service:jmx:rmi://10.25.50.160:50036/jndi/rmi://10.25.50.160:50035/carlos

TO GET JAVA STATS using esa-client
===========
/opt/rsa/esa/client/bin/esa-client --profiles carlos
carlos-connect
jmx-connect --domain java.lang
dump
cd /Memory
dump
