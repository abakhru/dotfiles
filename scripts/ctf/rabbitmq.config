%%
%% Copyright (c) 2014 RSA The Security Division of EMC
%%

%%
%% DO NOT EDIT!!
%%
%% This file is managed by an external process.  Modifying this file manually may result
%% in instability or other unpredictable behavior.  This file is intentionally designed
%% to require minimal or no changes.
%%

[
    {rabbit, [
        {auth_mechanisms, ['PLAIN', 'AMQPLAIN', 'EXTERNAL']},
        {loopback_users, []},
        % {vm_memory_high_watermark, 0.4}, 
        {disk_free_limit, 4297062400},
        %% TODO: Disable plain TCP connections, even from localhost
	{tcp_listeners, [5672]},
        {ssl_cert_login_from, common_name},
        {ssl_listeners, [5671]},
        {ssl_apps, [asn1,crypto,public_key,ssl]},
        {ssl_options, [
            {cacertfile, "/etc/rabbitmq/ssl/truststore.pem"},
            {certfile, "/etc/rabbitmq/ssl/server/cert.pem"},
            {keyfile, "/etc/rabbitmq/ssl/server/key.pem"},
            {verify, verify_peer},
            {fail_if_no_peer_cert, true},
            {ssl_cert_login_from, common_name},
            {ciphers, [
                {rsa, aes_256_cbc, sha}
                % TODO add more ciphersuites, as needed
            ]}
        ]}
    ]},
    {rabbitmq_stomp, [
            {tcp_listeners, []},
            {ssl_listeners, [61614]},
            {ssl_cert_login, true}
    ]},
    {rabbitmq_management, [
        {listener, [
            {ip, "10.101.217.122"},
            {port, 15671},
            {ssl, false},
            {ssl_opts, [
                {cacertfile, "/etc/rabbitmq/ssl/truststore.pem"},
                {certfile, "/etc/rabbitmq/ssl/server/cert.pem"},
                {keyfile, "/etc/rabbitmq/ssl/server/key.pem"},
                {ciphers, [
                    {rsa, aes_256_cbc, sha}
                    % TODO add more ciphersuites, as needed
                ]}
            ]}
        ]}
    ]}
].
